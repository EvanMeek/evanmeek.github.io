---
title: C++内存四区之代码区与全局区
copyright: true
date: 2019-05-11 20:52:44
categories: 学习笔记
tags:
  - C++
---

其实这一篇应该是作为"C++内存四区"的第一篇的。

<!--more-->

# 0x00 内存分区模型

C++程序在执行时，内存大方向的可划分为 *****************四个区域**

   - 代码区: 存放代码的二进制代码，由操作系统进行管理。

   - 全局区: 存放全局变量和静态变量以及常量。

   - 栈区: 由编译器自动分配释放，存放函数的参数值，局部变量等。

   - 堆区: 由程序员分配和释放，若程序员不释放，程序结束时由操作系统回收。

## 内存四区的意义:

不同区域存放的数据，代表着不同的生命周期，不同的生命周期使我们可以更灵活的编程。

# 0x01 程序运行前

在程序编译后，生成的可执行程序，当我们未执行此程序前，分为两个区域

代码区:

   存放CPU执行的机器指令
   
   共享的，共享的目的是对于频繁被执行的程序，只需要在内存中有一份代码即可。

   只读的，为了防止程序意外修改代码的指令，所以有了只读。

![代码区示意图](C-内存四区之代码区与全局区/代码区示意图.png)

如上图所示，代码区主要分为两个部分，共享区是存放常备执行的代码，例如程序员所指定的内联函数，或编译器所生成的代码，这些数据在程序跑起来会一直保存在内存中,

而只读部分是为了防止外部对程序内部的数据进行非法访问，举个栗子，你的程序设定买一个苹果需要1金币，但是某开发人员，通过某手段将此内存中的数据修改为-99999金币，那么就会造成数据非法修改。

---

